* I mainly relied on the templates and frameworks provided through Svelte, Svelthree, and Go Fiber *

---

# 3D Animations

This is a project that focuses on using [Go Fiber](https://docs.gofiber.io/), [Svelthree](https://svelthree.dev/), [Three.js](https://threejs.org/), 
and [Svelte-Cubed](https://github.com/Rich-Harris/svelte-cubed?ref=madewithsvelte.com) to deliver a website that can run multiple simultaneous 3D animations running at once.

I also used some 3D animations that you can go over in the following sections.


## Get started

To begin, make sure you're running [Node.js](https://nodejs.org) 16.7+, latest version of [Go Fiber](https://docs.gofiber.io/), and [Go](https://go.dev/) 1.14+.

Go to your top-level folder...
 ```bash
 cd <folder>
 ```

Install the dependencies...
```bash
npm install
```

... run the script to setup the [TypeScript](https://www.typescriptlang.org/) development environment ...
```bash
node scripts/setupTypeScript.js
```

...then start [Rollup](https://rollupjs.org) alongside [Go Fiber](https://docs.gofiber.io/)

```bash
npm run build && go run .
```

Navigate to the local site generated by [Go Fiber](http://127.0.0.1:3000). You should see your app running. 

Recommended to end the running program if you change any component in your code.

## Deploying to the web

I don't recommend any web deployment unless your system can handle the memory usage it needs. I tested it with my system and from my results, you need more than 8GB.

# Frameworks Used

## Svelte template

I used one of the provided [Svelte templates](https://github.com/sveltejs/template) to start the frontend-side of the project. 
```bash
npx degit sveltejs/template .
```
Although the repository is not maintained by the Svelte team anymore, it worked to setup the entire environment needed to run these 3D animations that used different types of libraries.

## Go Fiber - HTML Template

Go Fiber provides [Template interfaces](https://docs.gofiber.io/guide/templates) to run our template engine.

Our template engine, provided by Go Fiber, will render the HTML files in our ```templates``` folder. 
```go
engine := html.New("./templates", ".html")
```

From here, we can build the Fiber instance with its ```Views``` engine that will help our template engine render our HTML files.
```go
app := fiber.New(fiber.Config{
		Views: engine, //set as render engine
})
```
# Key Components

## main.go

In my ```main.go``` file, I decided to use [Go Fiber](https://docs.gofiber.io/) as my main web framework. It would allow me to host the 3D animations through a website. 

I needed to setup a ```go.mod``` file to call all the Go packages needed to run Go Fiber.

I also needed to setup a ```go.sum``` file to do a checksum on the packages used and avoid installing the packages again.

The specified Go packages in my ```main.go``` file were:
```
"time"
"github.com/gofiber/fiber/v2"
"github.com/gofiber/template/html"
```

### app.Static()
```go
app.Static("/public", "./public")
```
This allows our website to be able to access the ```public``` folder on our server. I didn't push the ```public``` folder on this repository due to its size. However, my template HTML file can be customized directly with a ```global.css``` file from that folder.

### app.Get()
```go
app.Get("/", mainPage)
```
A GET handler that returns the template HTML file with the 3D animations compiled in a single JS file using the ```mainpage``` function.

```go
app.Get("/time", func(c *fiber.Ctx) error {
		dt := time.Now()
		return c.SendString(dt.String())
})
```
With the help of the ```time``` Go package, we can get the latest time with this GET handler.

### app.Listen()
```go
app.Listen(":3000")
```
Once the entire web framework is set, we can start listening for any requests. 

### func mainpage()
```go
func mainPage(c *fiber.Ctx) error {
	return c.Render("mainpage", nil)
}
``` 
Function will render the ```mainpage.html``` file with the help of the template render engine we set up and return it through a GET request.

## src/main.ts
```ts
import App from './App.svelte';

const app = new App({
	target: document.getElementById('app'),
	props: {
		name: 'world'
	}
});


export default app;
```
This Typescript file serves to generate the ```App.svelte``` file, with its components, on the ```templates/mainpage.html``` file. It targets the ```<body id="app">``` tag. We make sure we export the ```app``` variable.

## src/svelthree.mjs
A bundled and minified version of (svelthree)[https://unpkg.com/svelthree@latest/dist/svelthree.mjs] that is used in some of the 3D animations. 

Setting the animations that required this file was very difficult since not all components were available through other Node.js libraries. I saved the file on my ```src``` folder to be able to run some of the 3D animations.

## rollup.config.js



 

